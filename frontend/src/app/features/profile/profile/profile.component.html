<div class="profile-container">
  <mat-card class="profile-card">
    <mat-card-header>
      <mat-card-title>User Profile</mat-card-title>
      <mat-card-subtitle>View your profile information</mat-card-subtitle>
    </mat-card-header>

    @if (loading()) {
    <div class="loading-container">
      <mat-spinner diameter="40"></mat-spinner>
    </div>
    } @else if (error()) {
    <div class="error-container">
      <p class="error-message">{{ error() }}</p>
      <button mat-raised-button color="primary" (click)="loadProfile()">
        <mat-icon>refresh</mat-icon>
        Retry
      </button>
    </div>
    } @else if (profile()) {
    <mat-card-content>
      <div class="profile-header">
        <div class="profile-image-container">
          @if (profile()?.profilePicture) {
          <img
            [src]="profile()?.profilePicture"
            alt="Profile"
            class="profile-image"
          />
          } @else {
          <div class="profile-image-placeholder">
            <mat-icon>person</mat-icon>
          </div>
          }
        </div>
        <div class="profile-summary">
          <h2>{{ profile()?.firstName }} {{ profile()?.lastName }}</h2>
          <p class="role-badge">{{ profile()?.role }}</p>
          <p class="email">{{ profile()?.email }}</p>
        </div>
      </div>

      <div class="profile-details">
        <div class="detail-section">
          <h3>Personal Information</h3>
          <div class="detail-row">
            <span class="detail-label">Phone Number:</span>
            <span class="detail-value">{{
              profile()?.phone || "Not provided"
            }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Date of Birth:</span>
            <span class="detail-value">{{
              profile()?.dob || "Not provided" | date : "mediumDate"
            }}</span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Gender:</span>
            <span class="detail-value">{{
              profile()?.gender || "Not provided"
            }}</span>
          </div>
        </div>

        <div class="detail-section">
          <h3>Address</h3>
          <div class="detail-row">
            <span class="detail-label">Address:</span>
            <span class="detail-value">{{
              profile()?.address || "Not provided"
            }}</span>
          </div>
        </div>
      </div>
    </mat-card-content>

    <mat-card-actions align="end">
      <button mat-button routerLink="/edit-profile">EDIT PROFILE</button>
    </mat-card-actions>
    }
  </mat-card>
</div>
